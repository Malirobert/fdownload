<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook動画ダウンローダー - Facebookの動画を保存</title>
    <meta name="description" content="ソフトウェアをインストールせずに、Facebook動画をHDで無料でダウンロード。">
    <meta name="keywords" content="facebookダウンローダー, facebook動画ダウンローダー, facebook動画ダウンロード, facebookをmp4に変換">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Facebook動画ダウンローダー">
    <meta property="og:title" content="Facebook動画ダウンローダー">
    <meta property="og:description" content="ソフトウェアをインストールせずに、Facebook動画をHDで無料でダウンロード。">
    <meta property="og:image" content="https://fdownload.site/images/facebook-downloader.jpg">
    <meta property="og:url" content="https://fdownload.site/ja/">
    <meta property="og:type" content="website">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Facebook動画ダウンローダー">
    <meta name="twitter:description" content="ソフトウェアをインストールせずに、Facebook動画をHDで無料でダウンロード。">
    <meta name="twitter:image" content="https://fdownload.site/images/facebook-downloader.jpg">

    <link rel="canonical" href="https://fdownload.site/ja/">
    <link rel="alternate" hreflang="x-default" href="https://fdownload.site" />
    <link rel="alternate" hreflang="en" href="https://fdownload.site" />
    <link rel="alternate" hreflang="fr" href="https://fdownload.site/fr/" />
    <link rel="alternate" hreflang="es" href="https://fdownload.site/es/" />
    <link rel="alternate" hreflang="pt" href="https://fdownload.site/pt/" />
    <link rel="alternate" hreflang="hi" href="https://fdownload.site/hi/" />
    <link rel="alternate" hreflang="ru" href="https://fdownload.site/ru/" />
    <link rel="alternate" hreflang="fil" href="https://fdownload.site/fil/" />
    <link rel="alternate" hreflang="ur" href="https://fdownload.site/ur/" />
    <link rel="alternate" hreflang="id" href="https://fdownload.site/id/" />
    <link rel="alternate" hreflang="bn" href="https://fdownload.site/bn/" />
    <link rel="alternate" hreflang="ar" href="https://fdownload.site/ar/" />
    <link rel="alternate" hreflang="ja" href="https://fdownload.site/ja/" />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="https://fdownload.site/images/facebook-downloader.png">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" as="style">
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Facebook動画ダウンローダー",
      "url": "https://fdownload.site/ja/",
      "description": "オンラインでFacebook動画をHDでダウンロードし、無料でデバイスに直接保存します。",
      "applicationCategory": "MultimediaApplication",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
    </script>
    <!-- START: Google Translate Scripts -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'ja', // Changed to 'ja' for Japanese version
                includedLanguages: 'en,zh-CN,hi,es,fr,ar,bn,pt,ru,id',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <!-- カスタムスタイル (ENバージョンから取得) -->
    <style>
         .blue-text{
            color: #1877f2;
            font-size: 2rem;
        }
        #Svg {
            width: 2.2rem;
            height: 2.2rem;
        }
       .url-item {
           display: flex;
           align-items: center;
           padding: 0.75rem;
           border: 1px solid #e2e8f0;
           border-radius: 0.5rem;
           margin-bottom: 0.5rem;
           background: white;
           transition: all 0.3s;
           justify-content: space-between; /* 要素が適切に配置されるようにする */
       }
       .url-text {
           flex-grow: 1;
           white-space: nowrap;
           overflow: hidden;
           text-overflow: ellipsis;
           margin: 0 1rem;
           direction: ltr; /* Forcing LTR direction for the text */
           text-align: left; /* Align text to the left */
       }
       .delete-btn {
           opacity: 0.7;
           transition: opacity 0.2s;
           margin-left: auto; /* ボタンを左に強制する */
           font-size: 1.1rem; /* アイコンサイズを少し大きくする */
           padding: 0.25rem; /* アイコンの周りに少しスペースを追加 */
       }
       .url-item:hover .delete-btn {
           opacity: 1;
       }
       .platform-badge {
           padding: 0.25rem 0.5rem;
           border-radius: 9999px;
           font-size: 0.75rem;
           font-weight: 500;
       }
       .download-progress {
           transition: all 0.3s ease;
       }
       .gradient-bg {
           background: linear-gradient(to right, #6366f1, #8b5cf6, #ec4899);
       }
       .animate-gradient-x {
           background-size: 200% 200%;
           animation: gradient-x 3s ease infinite;
       }
       @keyframes gradient-x {
           0% { background-position: 0% 50%; }
           50% { background-position: 100% 50%; }
           100% { background-position: 0% 50%; }
       }
        
       /* 広告バナーのスタイル - 修正済み */
       .ad-left-container, .ad-right-container {
           position: fixed;
           top: 80px; /* ナビゲーションバーのスペース */
           width: 160px;
           height: calc(100vh - 80px);
           z-index: 10;
           pointer-events: none; /* コンテナを介したクリックを許可 */
           overflow: visible;
       }
       
       .ad-left-container {
           left: 0;
       }
       
       .ad-right-container {
           right: 0;
       }
       
       .ad-left-scroll, .ad-right-scroll {
           height: 100%;
           display: flex;
           flex-direction: column;
           align-items: center;
           gap: 20px;
           padding: 10px;
       }
       
       .ad-item {
           width: 160px;
           pointer-events: auto; /* バナー上のクリックを許可 */
           background: white;
           border-radius: 5px;
           box-shadow: 0 2px 5px rgba(0,0,0,0.1);
       }
       
       .sticky-bottom-ad {
           position: fixed;
           bottom: 0;
           left: 0;
           width: 100%;
           z-index: 1000;
           text-align: center;
           background: rgba(255, 255, 255, 0.8);
           padding: 5px 0;
           pointer-events: auto;
       }
       
       /* モバイル画面でsticky-bottom-adウィジェットを非表示にする */
       @media (max-width: 768px) {
           .sticky-bottom-ad {
               display: none !important;
           }
       }
       
       /* 中央回転広告バナーのスタイル */
       .center-ad-container {
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           width: 365px;
           height: 410px;
           background: white;
           border-radius: 8px;
           box-shadow: 0 4px 15px rgba(0,0,0,0.2);
           z-index: 2000;
           display: none;
           overflow: hidden;
       }
       
       .center-ad-timer {
           position: absolute;
           top: 10px;
           left: 10px;
           background: rgba(0,0,0,0.7);
           color: white;
           padding: 2px 6px;
           border-radius: 10px;
           font-size: 12px;
           z-index: 2001;
       }
       
       .center-ad-close {
           position: absolute;
           top: 5px;
           right: 5px;
           width: 24px;
           height: 24px;
           background: rgba(0,0,0,0.7);
           color: white;
           border: none;
           border-radius: 50%;
           font-size: 16px;
           cursor: pointer;
           z-index: 2001;
           display: flex;
           align-items: center;
           justify-content: center;
           opacity: 0; /* 初期不透明度を設定するためにこの行を追加 */
           transition: opacity 0.3s ease; /* よりスムーズな効果のためにトランジションを追加 */
       }
       
       .center-ad-content {
           width: 100%;
           height: 100%;
           display: flex;
           align-items: center;
           justify-content: center;
       }
       
       .main-content-wrapper { /* 既存のCSSの.main-contentとの衝突を避けるために名前を変更 */
           margin: 0 auto;
           padding: 0 180px; /* サイドバナーのスペース */
           max-width: 1200px;
       }
       
       /* モバイルでバナーを非表示にする */
       @media (max-width: 1024px) {
           .ad-left-container, .ad-right-container {
               display: none;
           }
           
           .main-content-wrapper { /* 新しい名前を使用 */
               padding: 0 10px;
           }
       }
   </style>
   
   <style>
  .banner-mobile {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    margin-top: 16px;
    margin-bottom: 0;
    text-align: center;
  }
  @media (min-width: 1025px) {
    .banner-mobile {
      display: none !important;
    }
  }
  .banner-mobile img, .banner-mobile ins {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 0 auto;
  }
</style>

     <style>
      
      .main-container {
            display: flex;
            flex-direction: row; /* Force sections to be side-by-side */
            background-color: #fff;
            border-radius: 1.5rem; /* Rounded corners for the main container */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden; /* Ensure no scrollbars on the main container itself */
            max-width: 360px; /* Fixed max-width for the main container */
            max-height: 400px; /* Fixed max-height for the main container */
            width: 100%; /* Takes full available width up to max-width */
            height: 100%; /* Takes full available height up to max-height */
        }
        
        .left-section {
            background: linear-gradient(180deg, #1a2a6c, #0f1c40); /* Dark blue gradient */
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center; /* Vertical centering */
            align-items: center; /* Horizontal centering */
            padding: 0.75rem 0.5rem; /* Adjusted padding to fit */
            text-align: center;
            flex: 3; /* Takes 3/5 of the available width */
        }
        .left-section h1 {
            font-size: 1.4rem; /* Adjusted title size */
            line-height: 1.1; /* Reduced line height */
            margin-bottom: 0.4rem;
        }
        .left-section p {
            font-size: 0.8rem; /* Adjusted paragraph size */
            margin-bottom: 0.6rem;
        }
        #grabbberTextDisplay {
            font-size: 1.6rem; /* Adjusted "Grabbber" text size */
            font-weight: bold;
            margin-bottom: 0.6rem;
        }
        /* Style for Font Awesome icons */
        .social-icon {
            font-size: 1.6rem; /* Adjusted icon size */
            color: white; /* Icon color */
        }
        .left-section .flex { /* Targets the icon container */
            flex-direction: column; /* Forces icons to stack vertically */
            align-items: center; /* Centers icons horizontally */
            margin-bottom: 0; /* No bottom margin */
            padding-top: 0.2rem; /* Small padding for icon spacing */
        }
        .left-section .flex > *:not(:last-child) {
            margin-bottom: 0.2rem; /* Spacing between stacked icons */
        }


        .right-section {
            padding: 0.75rem 0.5rem; /* Adjusted padding to fit */
            flex: 2; /* Takes 2/5 of the available width */
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* Distributes space between title, text, button */
        }
        .right-section h2 {
            margin-top: 0; /* Title always at the top */
            margin-bottom: 0.4rem; /* Margin below title */
            font-size: 0.95rem; /* Adjusted title size */
        }
        .right-section p {
            font-size: 0.6rem; /* Very small text size for the long sentence */
            line-height: 1.2;
            margin-top: auto; /* Pushes text to the middle */
            margin-bottom: auto; /* Pushes text to the middle */
        }
        .get-it-for-life-button {
            background-color: #6a0dad; /* Purple background for button */
            color: white;
            padding: 0.4rem 0.8rem; /* Smaller button */
            border-radius: 0.75rem; /* Rounded corners for button */
            font-weight: 600;
            transition: background-color 0.3s ease;
            width: 100%; /* Takes full available width */
            margin-top: 0.6rem; /* Margin above the button */
            align-self: center;
            font-size: 0.7rem; /* Adjusted button text size */
        }
        .get-it-for-life-button:hover {
            background-color: #550099;
        }
    </style>

    <style>
    /* "お金を稼ぐ"ツールチップのスタイル */
    .earn-tooltip {
        visibility: hidden;
        opacity: 0;
        background: #fff; /* 純粋な白 */
        color: #222; /* 黒のテキスト */
        text-align: left !important; /* より良い可読性のために左揃えを強制 */
        border-radius: 0 !important; /* 長方形の形状を強制 */
        padding: 10px 16px;
        position: absolute;
        z-index: 100;
        left: 50%;
        transform: translateX(-50%);
        transition: opacity 0.2s;
        font-size: 0.98em;
        white-space: normal; /* テキストの改行を許可 */
        box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        max-width: 250px; /* より良い改行のために調整 */
        line-height: 1.4;
    }
    .earn-money-btn.navbar .earn-tooltip {
        top: 120%;
        bottom: auto;
        color: #222;
    }
    .earn-money-btn:hover .earn-tooltip,
    .earn-money-btn:focus .earn-tooltip {
        visibility: visible;
        opacity: 1;
    }
    </style>

    <style>
    /* "お金を稼ぐ"ボタンのスタイル */
    .earn-money-btn.navbar a {
        background: linear-gradient(to right, #a855f7, #ec4899, #f59e42) !important;
        color: #fff !important;
        font-weight: bold !important;
        border: none;
        box-shadow: 0 2px 8px rgba(0,0,0,0.10);
        border-radius: 0.5rem;
        transition: background 0.2s, color 0.2s;
    }
    .earn-money-btn.navbar a:hover, .earn-money-btn.navbar a:focus {
        background: linear-gradient(to right, #a855f7, #ec4899, #f59e42) !important;
        color: #fff !important;
    }
    </style>
</head>
<body class="bg-gray-100 font-sans" dir="ltr"> <!-- dir="ltr" for left-to-right language -->
    <div id="google_translate_element" style="position: absolute; top: -1000px; left: -1000px;"></div>
    <!-- ナビゲーションバー -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex items-center">
                    <span class="text-6xl sm:text-7xl md:text-8xl font-bold blue-text">fdownload</span>
                    <svg class="w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 blue-text" id="Svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="margin-left: 5px;"> <!-- Added style for 5px margin -->
                    <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8zm-1-9H7.41L12 15.59 16.59 11H13V6h-2z"/>
                    </svg>
                    </div>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <div class="relative group">
                        <div class="relative earn-money-btn navbar" style="display:inline-block;">
                            <a href="https://pawns.app/?r=grabbber" target="_blank" class="animate-gradient-x bg-gradient-to-r from-purple-600 via-pink-500 to-yellow-500 text-white px-4 py-2 rounded-md hover:shadow-xl transition duration-300">お金を稼ぐ</a>
                            <span class="earn-tooltip">ゲームをプレイしたり、接続を共有したりして、自由時間を月150〜300ドルに変えましょう。Pawns.appで簡単に受動的な収入を得ましょう。サインアップして3ドル獲得！</span>
                        </div>
                    </div>
                    
                    <a href="https://grabbber.site/" class="text-gray-700 hover:text-blue-600 transition">類似のダウンローダー</a>
                    <a href="https://grabbber.site/video-downloader-extension.html" class="text-gray-700 hover:text-blue-600 transition">Grabbber拡張機能を購入</a>
                    <div class="relative">
                        <button id="langBtn" class="flex items-center px-3 py-2 rounded-md text-gray-700 hover:text-blue-600 transition">
                          <span id="currentLang">JA</span>
                          <i class="fas fa-chevron-down ml-1"></i>
                        </button>
                        <div id="langDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-50">
                            <ul>
                                <li><a href="index.html" class="block px-4 py-2 hover:bg-gray-100">English</a></li>
                                <li><a href="/fr/index.html" class="block px-4 py-2 hover:bg-gray-100">Français (French)</a></li>
                                <li><a href="/es/index.html" class="block px-4 py-2 hover:bg-gray-100">Español (Spanish)</a></li>
                                <li><a href="/pt/index.html" class="block px-4 py-2 hover:bg-gray-100">Português (Portuguese)</a></li>
                                <li><a href="/hi/index.html" class="block px-4 py-2 hover:bg-gray-100">हिन्दी (Hindi)</a></li>
                                <li><a href="/ru/index.html" class="block px-4 py-2 hover:bg-gray-100">Русский (Russian)</a></li>
                                <li><a href="/fil/index.html" class="block px-4 py-2 hover:bg-gray-100">Filipino</a></li>
                                <li><a href="/ur/index.html" class="block px-4 py-2 hover:bg-gray-100">اردو (Urdu)</a></li>
                                <li><a href="/id/index.html" class="block px-4 py-2 hover:bg-gray-100">Bahasa Indonesia (Indonesian)</a></li>
                                <li><a href="/bn/index.html" class="block px-4 py-2 hover:bg-gray-100">বাংলা (Bengali)</a></li>
                                <li><a href="/ar/index.html" class="block px-4 py-2 hover:bg-gray-100">العربية (Arabic)</a></li>
                                <li><a href="/ja/index.html" class="block px-4 py-2 hover:bg-gray-100">日本語 (Japanese)</a></li>
                            </ul>
                        </div>
                        <!-- TODO: 各言語のhreflangタグをここに追加 -->
                    </div>
                </div>
                <div class="md:hidden flex items-center">
                    <div class="relative group">
                        <a href="https://pawns.app/?r=grabbber" target="_blank" class="animate-gradient-x bg-gradient-to-r from-purple-600 via-pink-500 to-yellow-500 text-white px-3 py-1.5 rounded-md hover:shadow-xl transition duration-300 text-sm mr-2">お金を稼ぐ</a> <!-- Changed ml-2 to mr-2 for LTR -->
                        <div class="absolute hidden group-hover:block bg-white text-gray-700 p-2 rounded-md shadow-lg z-50 w-64 right-0 mt-2"> <!-- Changed left-0 to right-0 for LTR dropdown -->
                            <p class="text-center text-sm">
                                ゲームをプレイしたり、接続を共有したりして、自由時間を月150〜300ドルに変えましょう。Pawns.appで簡単に受動的な収入を得ましょう。サインアップして3ドル獲得！
                            </p>
                        </div>
                    </div>
                    <button class="text-gray-700" onclick="toggleMobileMenu()" aria-label="メニューを開く">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>

            
            <!-- モバイルメニュー -->
            <div id="mobile-menu" class="hidden md:hidden">
                <div class="px-2 pt-2 pb-3 space-y-1 bg-white rounded-b-lg shadow-lg">
                    <a href="https://grabbber.site/" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition">類似のダウンローダー</a>
                    <a href="https://grabbber.site/video-downloader-extension.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition">Grabbber拡張機能を購入</a>
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between h-16 items-center">
                        <div class="flex items-center space-x-8">
                          <!-- 他のリンクがここに必要な場合 -->
                          <div class="relative">
                            <button id="langBtnMobile" class="flex items-center px-3 py-2 rounded-md text-gray-700 hover:text-blue-600 transition">
                              <span id="currentLangMobile">JA</span>
                              <i class="fas fa-chevron-down ml-1"></i>
                            </button>
                            <div id="langDropdownMobile" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-50"> <!-- Changed left-0 to right-0 for LTR dropdown -->
                              <ul>
                                <li><a href="index.html" class="block px-4 py-2 hover:bg-gray-100">English</a></li>
                                <li><a href="/fr/index.html" class="block px-4 py-2 hover:bg-gray-100">Français (French)</a></li>
                                <li><a href="/es/index.html" class="block px-4 py-2 hover:bg-gray-100">Español (Spanish)</a></li>
                                <li><a href="/pt/index.html" class="block px-4 py-2 hover:bg-gray-100">Português (Portuguese)</a></li>
                                <li><a href="/hi/index.html" class="block px-4 py-2 hover:bg-gray-100">हिन्दी (Hindi)</a></li>
                                <li><a href="/ru/index.html" class="block px-4 py-2 hover:bg-gray-100">Русский (Russian)</a></li>
                                <li><a href="/fil/index.html" class="block px-4 py-2 hover:bg-gray-100">Filipino</a></li>
                                <li><a href="/ur/index.html" class="block px-4 py-2 hover:bg-gray-100">اردو (Urdu)</a></li>
                                <li><a href="/id/index.html" class="block px-4 py-2 hover:bg-gray-100">Bahasa Indonesia (Indonesian)</a></li>
                                <li><a href="/bn/index.html" class="block px-4 py-2 hover:bg-gray-100">বাংলা (Bengali)</a></li>
                                <li><a href="/ar/index.html" class="block px-4 py-2 hover:bg-gray-100">العربية (Arabic)</a></li>
                                <li><a href="/ja/index.html" class="block px-4 py-2 hover:bg-gray-100">日本語 (Japanese)</a></li>
                              </ul>
                            </div>
                          </div>
                        </div>   
                    </div>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- 左バナー - 追加済み -->
    <div class="ad-left-container">
        <div class="ad-left-scroll">
            <!-- Exoclice Left 1 -->
            <div class="ad-item">
                <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script>
                <ins class="eas6a97888e2" data-zoneid="5653232"></ins>
                <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
            </div>
            
            <!-- Pawn.app Left 1 -->
            <div class="ad-item">
                <a href="https://pawns.app/?r=grabbber" target="_blank">
                    <img src="https://cdn.pawns.app/images/b/160.jpg" alt="Pawns.app">
                </a>
            </div>
            
            <!-- Exoclice Left 2 -->
            <div class="ad-item">
                <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script>
                <ins class="eas6a97888e2" data-zoneid="5653236"></ins>
                <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
            </div>
            
            <!-- Pawn.app Left 2 -->
            <div class="ad-item">
                <a href="https://pawns.app/?r=grabbber" target="_blank">
                    <img src="https://cdn.pawns.app/images/b/160.jpg" alt="Pawns.app">
                </a>
            </div>
            
            <!-- Exoclice Left 3 -->
            <div class="ad-item">
                <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script>
                <ins class="eas6a97888e2" data-zoneid="5653240"></ins>
                <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
            </div>
        </div>
    </div>
    
    <!-- サイドバナーのスペースを確保するためのメインコンテンツラッパー -->
    <div class="main-content-wrapper">
            <div class="container mx-auto px-4 py-8 max-w-4xl">
                <!-- 既存のコンテンツは変更なし -->
                <header class="text-center mb-8">
                    <h1 class="text-4xl font-bold text-blue-600 mb-2">Facebook動画ダウンローダー</h1>
                    <p class="text-lg text-gray-600">オンラインでFacebook動画をHDでダウンロード</p>
                    <div class="mt-4 text-blue-800 font-medium">
                        <span id="url-counter">0</span> <span id="video-selected-text">動画が選択されました</span>
                    </div>
                </header>

                <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                    <div class="flex flex-col md:flex-row gap-2 mb-4">
                        <input type="text" id="url-input" placeholder="ここにFacebookのURLを貼り付け..."
                               class="flex-grow px-4 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-left" dir="ltr"> <!-- text-left and dir="ltr" for input -->
                        <button id="add-url-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition duration-300 flex items-center justify-center">
                            <i class="fas fa-plus mr-2"></i>URLを追加 <!-- Changed ml-2 to mr-2 for LTR -->
                        </button>
                    </div>
                    <div id="url-error" class="text-red-500 hidden mb-4 text-left" dir="ltr"></div> <!-- text-left and dir="ltr" for error -->
                    
                    <div class="flex flex-col md:flex-row gap-2 mb-4">
                        <div class="flex-grow">
                            <label for="excel-input" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition duration-300 flex items-center justify-center cursor-pointer">
                                <i class="fas fa-file-excel mr-2"></i>Excelからインポート <!-- Changed ml-2 to mr-2 for LTR -->
                                <input type="file" id="excel-input" accept=".xlsx, .xls, .csv" class="hidden">
                            </label>
                        </div>
                        <div id="excel-status" class="text-green-600 hidden text-left" dir="ltr"></div> <!-- text-left and dir="ltr" for status -->
                    </div>
                    
                    <div class="text-sm text-gray-500 mb-4 text-left" dir="ltr"> <!-- text-left and dir="ltr" for platform text -->
                        対応プラットフォーム: 
                        <span class="inline-block bg-blue-600 text-white px-2 py-1 rounded-full text-xs mr-1">Facebook</span> <!-- Changed ml-1 to mr-1 for LTR -->
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                    <h2 class="text-xl font-semibold text-blue-600 mb-4 text-left" dir="ltr">あなたのURL</h2> <!-- text-left and dir="ltr" for heading -->
                    <div id="url-list" class="mb-6">
                        <div class="text-gray-500 text-center py-8" id="empty-list-message" dir="ltr"> <!-- dir="ltr" for empty message -->
                            <i class="fas fa-link text-3xl mb-2"></i>
                            <p>Facebook動画のダウンロードを開始するにはURLを追加してください</p>
                        </div>
                    </div>
                    <button id="download-all-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition duration-300 flex items-center justify-center disabled:bg-blue-300 disabled:cursor-not-allowed" disabled>
                        <i class="fas fa-download mr-2"></i>すべてダウンロード <!-- Changed ml-2 to mr-2 for LTR -->
                    </button>
                </div>

                <div id="results-container" class="bg-white rounded-lg shadow-lg p-6 mb-8 hidden">
                    <h2 class="text-xl font-semibold text-blue-600 mb-4 text-left" dir="ltr">ダウンロード結果</h2> <!-- text-left and dir="ltr" for heading -->
                    <div id="results-list" class="divide-y divide-gray-200 max-h-80 overflow-y-auto"></div>
                </div>
            </div>
            <!-- モバイルバナー - 追加済み -->
            <div class="banner-mobile mx-auto flex flex-col items-center justify-center" style="margin-top:16px;max-width:350px;">
                <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script> 
                <ins class="eas6a97888e2" data-zoneid="5654110"></ins> 
                <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
            </div>

              <!-- 機能セクション -->
              <section class="container mx-auto px-4 py-6 max-w-4xl" aria-labelledby="features-heading">
                  <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                      <h2 id="features-heading" class="text-2xl font-semibold text-blue-600 mb-4 text-left" dir="ltr">Facebook動画ダウンローダーの機能</h2> <!-- text-left and dir="ltr" for heading -->
                       
                      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                          <article class="bg-blue-50 p-4 rounded-lg text-center">
                              <div class="text-3xl text-blue-500 mb-2"><i class="fas fa-infinity" aria-hidden="true" title="無制限ダウンロード"></i></div>
                              <h3 class="font-bold mb-2">無制限</h3>
                              <p class="text-gray-600">Facebook動画を好きなだけダウンロード — 制限なし。当社のサービスはFacebook動画を保存するための究極のソリューションです。</p>
                          </article>
                           
                          <article class="bg-blue-50 p-4 rounded-lg text-center">
                              <div  class="text-3xl text-blue-500 mb-2"><i class="fas fa-check-circle" aria-hidden="true" title="高品質"></i></div>
                              <h3 class="font-bold mb-2">クリーンな品質</h3>
                              <p class="text-gray-600">ロゴや不要な要素なしでFacebook動画を入手し、非常にクリーンなコンテンツを実現します。</p>
                          </article>
                           
                          <article class="bg-blue-50 p-4 rounded-lg text-center">
                              <div class="text-3xl text-blue-500 mb-2"><i class="fas fa-file-video" aria-hidden="true" title="MP4形式"></i></div>
                              <h3 class="font-bold mb-2">MP4形式</h3>
                              <p class="text-gray-600">複数のFacebook動画を一度にMP4形式でダウンロードします。</p>
                          </article>
                      </div>
                  </div>
              </section>
            <div class="banner-mobile mx-auto flex flex-col items-center justify-center" style="margin-top:16px;max-width:350px;">
              <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script> 
              <ins class="eas6a97888e2" data-zoneid="5654118"></ins> 
              <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
            </div>
             
            <!-- ダウンロード方法セクション -->
            <div class="container mx-auto px-4 py-6 max-w-4xl">
                <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                    <h3 class="text-xl font-semibold text-blue-600 mb-3 text-left" dir="ltr">fdownloadでFacebook動画をダウンロードする方法</h3> <!-- text-left and dir="ltr" for heading -->
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div class="border border-gray-200 p-4 rounded-lg text-left" dir="ltr"> <!-- dir="ltr" for content -->
                            <div class="text-2xl text-blue-500 mb-2">1</div>
                            <h4 class="font-bold mb-2">動画を見つける</h4>
                            <p class="text-gray-600">Facebook（ウェブサイトまたはモバイルアプリ）を開きます。保存したい動画を見つけるためにスクロールします。正しいことを確認するために動画を再生します。</p>
                        </div>
                        
                        <div class="border border-gray-200 p-4 rounded-lg text-left" dir="ltr"> <!-- dir="ltr" for content -->
                            <div class="text-2xl text-blue-500 mb-2">2</div>
                            <h4 class="font-bold mb-2">リンクをコピー</h4>
                            <p class="text-gray-600">動画の横にある共有ボタンをタップします。メニューから「リンクをコピー」を選択します。URLがクリップボードに正しくコピーされたことを確認します。</p>
                        </div>
                        
                        <div class="border border-gray-200 p-4 rounded-lg text-left" dir="ltr"> <!-- dir="ltr" for content -->
                            <div class="text-2xl text-blue-500 mb-2">3</div>
                            <h4 class="font-bold mb-2">動画を保存</h4>
                            <p class="text-gray-600">コピーしたリンクをこのページ上部のフィールドに貼り付けます。「URLを追加」をクリックしてリンクを追加し、「すべてダウンロード」をクリックしてダウンロードを開始します。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="banner-mobile mx-auto flex flex-col items-center justify-center" style="margin-top:16px;max-width:350px;">
                <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script> 
                <ins class="eas6a97888e2" data-zoneid="5654120"></ins> 
                <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
            </div>

            <!-- 動画デモコンテナ -->
            <div class="container mx-auto px-4 py-6 max-w-4xl">
                <div class="bg-white rounded-lg shadow-lg p-8 mb-8">  <!-- パディングをp-6からp-8に増加 -->
                    <h3 class="text-xl font-semibold text-blue-600 text-center mb-6 text-left" dir="ltr">fdownloadのFacebookダウンローダーが複数の動画を一度にダウンロードする方法を見る</h3> <!-- text-left and dir="ltr" for heading -->
                    
                    <div class="aspect-w-16 aspect-h-9 mb-8">  <!-- 下マージンを増加 -->
                        <div class="w-full h-0 pb-[56.25%] relative bg-gray-200 rounded-lg flex items-center justify-center cursor-pointer" id="video-demo-container" style="min-height: 350px;" aria-label="Grabbberの複数ダウンロード機能の動画デモンストレーション" loading="lazy">
                            <div class="absolute inset-0 flex items-center justify-center">
                                <i class="fas fa-play-circle text-6xl text-blue-500 opacity-70" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                    
                    <p class="text-center text-gray-600 mb-4 text-lg text-left" dir="ltr">動画デモ</p>  <!-- テキストサイズを増加 -->
                    
                    <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            const videoContainer = document.getElementById('video-demo-container');
                            
                            videoContainer.addEventListener('click', function() {
                                // 動画デモスクリプト内
                                this.innerHTML = `<iframe class="absolute inset-0 w-full h-full" style="min-height: 350px;" src="videos/How-to-download-facebook-videos.mp4" title="Grabbberの複数ダウンロード機能の動画デモンストレーション" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                                // 注: 'about:blank'を実際の動画URLに置き換えてください
                            });
                        });
                    </script>
                </div>
            </div>
             
            <div class="text-center text-gray-700 p-2 lg:hidden text-left" dir="ltr"> <!-- dir="ltr" for content -->
                <p>
                    ゲームをプレイしたり、接続を共有したりして、自由時間を月150〜300ドルに変えましょう。Pawns.appで簡単に受動的な収入を得ましょう。サインアップして3ドル獲得！ 
                    <i class="fas fa-arrow-right text-purple-600 ml-1"></i> <!-- Changed mr-1 to ml-1 for LTR -->
                    <a href="https://pawns.app/?r=grabbber" target="_blank" class="text-purple-600 font-bold hover:underline">Pawns.app</a>
                </p>
            </div>
            <div class="banner-mobile">
                <a href="https://pawns.app/?r=grabbber" target="_blank">
                    <img src="https://cdn.pawns.app/images/b/630.jpg" alt="Pawns.app">
                </a>
            </div>
            <!-- 機能リストセクション -->
            <div class="container mx-auto px-4 py-6 max-w-4xl">
                <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                    <h3 class="text-xl font-semibold text-blue-600 mb-4 text-left" dir="ltr">なぜfdownloadを選ぶのか？あなたの究極のFacebookダウンローダー</h3> <!-- text-left and dir="ltr" for heading -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <ul class="list-disc pl-5 text-left" dir="ltr" style="list-style-position: inside;"> <!-- dir="ltr" and list-style-position for LTR list -->
                            <li class="mb-2">Facebook動画を簡単かつ無料でダウンロード。「Facebook動画をダウンロードできない」というイライラにさようなら！</li>
                            <li class="mb-2">ログインは不要です。公開またはプライベート（アクセス可能な場合）の動画を保存するには、リンクを貼り付けるだけです。</li>
                            <li class="mb-2">HDで高速ダウンロードをお楽しみください。Facebookライブ動画も含まれます。</li>
                            <li class="mb-2">当社のツールを使用すると、オフライン視聴のためにも、複数の動画を一度にダウンロードできます。</li>
                        </ul>
            
                        <ul class="list-disc pl-5 text-left" dir="ltr" style="list-style-position: inside;"> <!-- dir="ltr" and list-style-position for LTR list -->
                            <li class="mb-2">すべてのダウンロードはMP4形式で、どこでも互換性があります。</li>
                            <li class="mb-2">当社のツールはすべてのブラウザとオペレーティングシステムで動作します。</li>
                            <li class="mb-2">不要なオーバーレイなしでHD動画を入手できます。</li>
                            <li class="mb-2">効率的なバッチ処理のために、Excelファイル経由で多数のリンクをインポートできます。</li>
                        </ul>
                    </div>
                </div>
            </div>
             <div class="text-center text-gray-700 p-2 lg:hidden text-left" dir="ltr"> <!-- dir="ltr" for content -->
                <p>
                    ゲームをプレイしたり、接続を共有したりして、自由時間を月150〜300ドルに変えましょう。Pawns.appで簡単に受動的な収入を得ましょう。サインアップして3ドル獲得！ 
                    <i class="fas fa-arrow-right text-purple-600 ml-1"></i> <!-- Changed mr-1 to ml-1 for LTR -->
                    <a href="https://pawns.app/?r=grabbber" target="_blank" class="text-purple-600 font-bold hover:underline">Pawns.app</a>
                </p>
            </div>
             <div class="banner-mobile">
                <a href="https://pawns.app/?r=grabbber" target="_blank">
                    <img src="https://cdn.pawns.app/images/b/630.jpg" alt="Pawns.app">
                </a>
            </div>
             
            <!-- FAQセクション -->
            <div class="container mx-auto px-4 py-6 max-w-4xl">
                <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                    <h3 class="text-xl font-semibold text-blue-600 mb-4 text-left" dir="ltr">よくある質問</h3> <!-- text-left and dir="ltr" for heading -->
                    
                    <div class="space-y-4">
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <button class="w-full px-4 py-3 text-left font-medium flex justify-between items-center hover:bg-gray-50" dir="ltr"> <!-- text-left and dir="ltr" for button -->
                                <span>Facebook動画をダウンロードするためにfdownloadを使用するには料金がかかりますか？</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="px-4 py-3 bg-gray-50 hidden text-left" dir="ltr"> <!-- text-left and dir="ltr" for content -->
                                <p class="text-gray-600">いいえ、当社のサービスは完全に無料です。費用なしで好きなだけFacebook動画をダウンロードできます。</p>
                            </div>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <button class="w-full px-4 py-3 text-left font-medium flex justify-between items-center hover:bg-gray-50" dir="ltr"> <!-- text-left and dir="ltr" for button -->
                                <span>このツールでFacebookのどんな動画でもダウンロードできますか？</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="px-4 py-3 bg-gray-50 hidden text-left" dir="ltr"> <!-- text-left and dir="ltr" for content -->
                                <p class="text-gray-600">はい、当社のFacebookダウンローダーは、ほとんどの公開Facebook動画コンテンツを処理するように設計されています。通常、動画リンクを貼り付けるだけで、公開プロフィール、ページ、グループからFacebook動画をダウンロードできます。一部のツールはプライベートなFacebook動画のダウンロードを提供すると主張していますが、アクセスは通常、動画のプライバシー設定とあなたの許可に依存します。</p>
                            </div>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <button class="w-full px-4 py-3 text-left font-medium flex justify-between items-center hover:bg-gray-50" dir="ltr"> <!-- text-left and dir="ltr" for button -->
                                <span>ダウンロードしたFacebook動画の品質はどうですか？</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="px-4 py-3 bg-gray-50 hidden text-left" dir="ltr"> <!-- text-left and dir="ltr" for content -->
                                <p class="text-gray-600">当社のサービスでは、Facebook動画を高解像度でダウンロードできます。HD品質（利用可能な場合は最大1080p）でFacebook動画をダウンロードでき、デバイスでクリアでシャープな再生が保証されます。</p>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <button class="w-full px-4 py-3 text-left font-medium flex justify-between items-center hover:bg-gray-50" dir="ltr"> <!-- text-left and dir="ltr" for button -->
                                <span>fdownloadで一度に何本のFacebook動画をダウンロードできますか？</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="px-4 py-3 bg-gray-50 hidden text-left" dir="ltr"> <!-- text-left and dir="ltr" for content -->
                                <p class="text-gray-600">制限はありません！一度に好きなだけFacebook動画をダウンロードできます。ただし、手動またはExcelファイル経由で、最大10個のFacebook動画URLを追加することを強くお勧めします。</p>
                            </div>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <button class="w-full px-4 py-3 text-left font-medium flex justify-between items-center hover:bg-gray-50" dir="ltr"> <!-- text-left and dir="ltr" for button -->
                                <span>ダウンロードしたFacebook動画の形式は何ですか？</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="px-4 py-3 bg-gray-50 hidden text-left" dir="ltr"> <!-- text-left and dir="ltr" for content -->
                                <p class="text-gray-600">すべてのFacebook動画ダウンロードは、広く互換性のあるMP4形式で保存されます。これは、特別なソフトウェアを必要とせずに、携帯電話からコンピューターまで、ほぼすべてのデバイスでダウンロードしたFacebook動画ファイルを簡単に再生できることを意味します。</p>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <button class="w-full px-4 py-3 text-left font-medium flex justify-between items-center hover:bg-gray-50" dir="ltr"> <!-- text-left and dir="ltr" for button -->
                                <span>Facebookライブ動画やリールをダウンロードできますか？</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="px-4 py-3 bg-gray-50 hidden text-left" dir="ltr"> <!-- text-left and dir="ltr" for content -->
                                <p class="text-gray-600">はい、当社のFacebook動画ダウンローダーは、ライブストリームが終了し、通常の動画として利用可能になったFacebookライブ動画のダウンロードをサポートしています。Facebookリールをダウンロードするためにも使用でき、お気に入りのショートコンテンツをすべて保存できます。</p>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <button class="w-full px-4 py-3 text-left font-medium flex justify-between items-center hover:bg-gray-50" dir="ltr"> <!-- text-left and dir="ltr" for button -->
                                <span>このFacebook動画ダウンローダーは無料で利用できますか？</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="px-4 py-3 bg-gray-50 hidden text-left" dir="ltr"> <!-- text-left and dir="ltr" for content -->
                                <p class="text-gray-600">もちろんです！当社のFacebookダウンローダーは完全に無料で利用できます。Facebook動画コンテンツをダウンロードするための隠れた料金やサブスクリプションは必要ありません。リンクを貼り付けてダウンロードをお楽しみください！</p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="banner-mobile mx-auto flex flex-col items-center justify-center" style="margin-top:16px;max-width:350px;">
                <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script> 
                <ins class="eas6a97888e2" data-zoneid="5654128"></ins> 
                <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
            </div>
             
            <!-- FAQトグルスクリプトを追加 -->
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const faqButtons = document.querySelectorAll('.border.border-gray-200.rounded-lg.overflow-hidden button');
                    
                    faqButtons.forEach(button => {
                        button.addEventListener('click', function() {
                            const content = this.nextElementSibling;
                            const icon = this.querySelector('i');
                            
                            // コンテンツの表示/非表示を切り替える
                            if (content.classList.contains('hidden')) {
                                content.classList.remove('hidden');
                                icon.classList.remove('fa-chevron-down');
                                icon.classList.add('fa-chevron-up');
                            } else {
                                content.classList.add('hidden');
                                icon.classList.remove('fa-chevron-up');
                                icon.classList.add('fa-chevron-down');
                            }
                        });
                    });
                });
            </script>

            <!-- Excelインポート用のXLSXライブラリを含める -->
            <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js" defer></script>
            <script>
                function toggleMobileMenu() {
                    const mobileMenu = document.getElementById('mobile-menu');
                    mobileMenu.classList.toggle('hidden');
                }
            </script>

            <script>
            document.addEventListener('DOMContentLoaded', function() {
                // DOM参照
                const urlInput = document.getElementById('url-input');
                const addUrlBtn = document.getElementById('add-url-btn');
                const urlList = document.getElementById('url-list');
                const emptyListMessage = document.getElementById('empty-list-message');
                const urlCounter = document.getElementById('url-counter');
                const downloadAllBtn = document.getElementById('download-all-btn');
                const excelInput = document.getElementById('excel-input');
                const excelStatus = document.getElementById('excel-status');
                const urlError = document.getElementById('url-error');
                const resultsContainer = document.getElementById('results-container');
                const resultsList = document.getElementById('results-list');
                
                // グローバル変数
                let urls = [];
                let isDownloading = false; // ダウンロード状態を追跡するための変数
                
                // ダウンロード中にインターフェースを有効/無効にする関数
                function setInterfaceState(downloading) {
                    isDownloading = downloading;
                    
                    // インターフェース要素を無効/有効にする
                    urlInput.disabled = downloading;
                    addUrlBtn.disabled = downloading;
                    downloadAllBtn.disabled = downloading;
                    excelInput.disabled = downloading;
                    
                    // ダウンロードボタンの外観を変更する
                    if (downloading) {
                        downloadAllBtn.classList.add('opacity-50', 'cursor-not-allowed');
                        downloadAllBtn.classList.remove('hover:bg-blue-600');
                    } else {
                        downloadAllBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                        downloadAllBtn.classList.add('hover:bg-blue-600');
                    }
                    
                    // 削除ボタンを無効/有効にする
                    const deleteButtons = document.querySelectorAll('.delete-btn');
                    deleteButtons.forEach(btn => {
                        btn.disabled = downloading;
                        if (downloading) {
                            btn.classList.add('opacity-50', 'cursor-not-allowed');
                        } else {
                            btn.classList.remove('opacity-50', 'cursor-not-allowed');
                        }
                    });
                }

                function updateUrlCounter() {
                    urlCounter.textContent = urls.length;
                    if (urls.length > 0) {
                        downloadAllBtn.disabled = false;
                        emptyListMessage.style.display = 'none';
                    } else {
                        downloadAllBtn.disabled = true;
                        emptyListMessage.style.display = 'block';
                    }
                }
                
                function validateUrl(url) {
                    // 基本的なURL検証
                    if (!url) return false;
                   
                         // URLがサポートされているプラットフォームからのものかを確認
                         const supportedPlatforms = [
                        'facebook.com', 'fb.com', 'fb.watch'
                    ];
                    
                    return supportedPlatforms.some(platform => url.includes(platform));
                }
                
                function identifyPlatform(url) {
                    if (url.includes('facebook.com') || url.includes('fb.com') || url.includes('fb.watch')) {
                        return { name: 'Facebook', class: 'bg-blue-600 text-white' };
                    }
                    return { name: '不明', class: 'bg-gray-100 text-gray-700' };
                }
                
                function addUrlToList(url) {
                    if (!validateUrl(url)) {
                        urlError.textContent = '有効なFacebookのURLを入力してください';
                        urlError.classList.remove('hidden');
                        return;
                    }
                    
                    if (urls.includes(url)) {
                        urlError.textContent = 'このURLは既に追加されています';
                        urlError.classList.remove('hidden');
                        return;
                    }
                    
                    urlError.classList.add('hidden');
                    
                    urls.push(url);
                    
                    const platform = identifyPlatform(url);
                    
                    const urlItem = document.createElement('div');
                    urlItem.className = 'url-item flex justify-between items-center';
                    urlItem.dataset.url = url;
                    
                    const leftPart = document.createElement('div'); // Changed rightPart to leftPart for LTR
                    leftPart.className = 'flex items-center flex-grow overflow-hidden';
                    
                    const platformBadge = document.createElement('span');
                    platformBadge.className = `platform-badge ${platform.class} mr-2`; // Changed ml-2 to mr-2 for LTR
                    platformBadge.textContent = platform.name;
                    
                    const urlText = document.createElement('span');
                    urlText.className = 'url-text truncate ml-2 text-left'; // Changed mr-2 to ml-2 and added text-left for LTR
                    urlText.textContent = url;
                    
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'delete-btn text-red-500 hover:text-red-700 ml-2 flex-shrink-0'; // Changed mr-2 to ml-2 for LTR
                    deleteBtn.innerHTML = '<i class="fas fa-times"></i>';
                    deleteBtn.addEventListener('click', function() {
                        urlItem.remove();
                        urls = urls.filter(u => u !== url);
                        updateUrlCounter();
                    });
                    
                    leftPart.appendChild(platformBadge);
                    leftPart.appendChild(urlText);
                    
                    urlItem.appendChild(leftPart); // Appended leftPart
                    urlItem.appendChild(deleteBtn);
                    
                    urlList.appendChild(urlItem);
                    urlInput.value = '';
                    
                    updateUrlCounter();
                }
                
                function addUrl() {
                    const url = urlInput.value.trim();
                    if (url) {
                        addUrlToList(url);
                    } else {
                        urlError.textContent = 'URLがまだ追加されていません';
                        urlError.classList.remove('hidden');
                    }
                }
                
                function handleExcelImport(e) {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const data = new Uint8Array(e.target.result);
                            const workbook = XLSX.read(data, {type: 'array'});
                            
                            // 最初のワークシートを取得
                            const worksheetName = workbook.SheetNames[0];
                            const worksheet = workbook.Sheets[worksheetName];
                            
                            // JSONに変換
                            const jsonData = XLSX.utils.sheet_to_json(worksheet, {header: 1});
                            
                            // URLを抽出（URLが最初の列にあると仮定）
                            let importCount = 0;
                            jsonData.forEach(row => {
                                if (row.length > 0 && typeof row[0] === 'string') {
                                    const url = row[0].trim();
                                    if (validateUrl(url) && !urls.includes(url)) {
                                        addUrlToList(url);
                                        importCount++;
                                    }
                                }
                            });
                            
                            // ステータスを表示
                            excelStatus.textContent = `${importCount}個のURLがExcelからインポートされました`;
                            excelStatus.classList.remove('hidden');
                            setTimeout(() => {
                                excelStatus.classList.add('hidden');
                            }, 3000);
                            
                        } catch (error) {
                            console.error('Excelファイルの解析エラー:', error);
                            excelStatus.textContent = 'Excelファイルの解析エラー';
                            excelStatus.classList.remove('hidden');
                            setTimeout(() => {
                                excelStatus.classList.add('hidden');
                            }, 3000);
                        }
                    };
                    reader.readAsArrayBuffer(file);
                }
                
                function createDownloadItem(url, status) {
                    const platform = identifyPlatform(url);
                    const item = document.createElement('div');
                    item.className = 'py-4';
                    item.dataset.url = url;
                    
                    let statusHTML = '';
                    if (status === 'downloading') {
                        statusHTML = `
                            <div class="flex items-center">
                                <div class="w-6 h-6 mr-3 flex-shrink-0"> <!-- Changed ml-3 to mr-3 for LTR -->
                                    <div class="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
                                </div>
                                <div class="text-blue-500 font-medium text-left" dir="ltr">ダウンロード中...</div>
                            </div>
                        `;
                    } else if (status === 'success') {
                        statusHTML = `
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-6 h-6 mr-3 flex-shrink-0 text-green-500"> <!-- Changed ml-3 to mr-3 for LTR -->
                                        <i class="fas fa-check-circle text-xl"></i>
                                    </div>
                                    <div class="text-green-500 font-medium text-left" dir="ltr">ダウンロード完了</div>
                                </div>
                                <button class="open-btn bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm transition duration-300 ml-4"> <!-- Changed mr-4 to ml-4 for LTR -->
                                    <i class="fas fa-external-link-alt mr-1"></i>開く <!-- Changed ml-1 to mr-1 for LTR -->
                                </button>
                            </div>
                        `;
                    } else if (status === 'error') {
                        statusHTML = `
                            <div class="flex items-center">
                                <div class="w-6 h-6 mr-3 flex-shrink-0 text-red-500"> <!-- Changed ml-3 to mr-3 for LTR -->
                                    <i class="fas fa-times-circle text-xl"></i>
                                </div>
                                <div class="text-red-500 font-medium text-left" dir="ltr">ダウンロード失敗</div>
                            </div>
                        `;
                    }
                    
                    item.innerHTML = `
                        <div class="flex items-center mb-2">
                            <span class="platform-badge ${platform.class} mr-2">${platform.name}</span> <!-- Changed ml-2 to mr-2 for LTR -->
                            <span class="text-sm text-gray-600 truncate text-left" dir="ltr">${url}</span>
                        </div>
                        ${statusHTML}
                    `;
                    
                    // 成功したダウンロードの場合、開くボタンのイベントリスナーを追加
                    if (status === 'success') {
                        const openBtn = item.querySelector('.open-btn');
                        if (openBtn) {
                            const downloadState = getDownloadState(url);
                            if (downloadState && downloadState.downloadId && downloadState.fileName) {
                                openBtn.addEventListener('click', function() {
                                    window.open(`https://gabbber-mobile.onrender.com/download/${downloadState.downloadId}/${downloadState.fileName}`, '_blank');
                                });
                            } else {
                                openBtn.disabled = true;
                                openBtn.classList.add('opacity-50', 'cursor-not-allowed');
                            }
                        }
                    }
                    
                    return item;
                }

                // 失われたloadSavedDownloads関数を追加
                function loadSavedDownloads() {
                    const downloads = JSON.parse(localStorage.getItem('downloads') || '{}');
                    
                    // 保存されたダウンロードがある場合、結果コンテナを表示
                    if (Object.keys(downloads).length > 0) {
                        resultsContainer.classList.remove('hidden');
                    }
                    
                    // すべての保存されたダウンロードを反復処理
                    for (const [url, downloadData] of Object.entries(downloads)) {
                        // そのステータスに応じて各ダウンロードのアイテムを作成
                        const downloadItem = createDownloadItem(url, downloadData.state);
                        resultsList.appendChild(downloadItem);
                        
                        // 成功したダウンロードの場合、開くボタンのイベントリスナーを追加
                        if (downloadData.state === 'success') {
                            const openBtn = downloadItem.querySelector('.open-btn');
                            if (openBtn && downloadData.downloadId && downloadData.fileName) {
                                openBtn.addEventListener('click', function() {
                                    window.open(`https://gabbber-mobile.onrender.com/download/${downloadData.downloadId}/${downloadData.fileName}`, '_blank');
                                });
                            }
                        }
                    }
                }

                // ダウンロードの永続性を管理する関数
                function saveDownloadState(url, state, downloadId = null, fileName = null) {
                    const downloads = JSON.parse(localStorage.getItem('downloads') || '{}');
                    downloads[url] = {
                        state: state,
                        downloadId: downloadId,
                        fileName: fileName,
                        timestamp: new Date().getTime()
                    };
                    localStorage.setItem('downloads', JSON.stringify(downloads));
                }

                function getDownloadState(url) {
                    const downloads = JSON.parse(localStorage.getItem('downloads') || '{}');
                    return downloads[url] || null;
                }

                // downloadVideos関数を変更
                async function downloadVideos(e) {
                    if (e) {
                        e.preventDefault();
                        e.stopPropagation();
                    }
                    
                    if (urls.length === 0 || isDownloading) return;
                    
                    // ダウンロード中にインターフェースを無効にする
                    setInterfaceState(true);
                    
                    // 結果コンテナを表示
                    resultsList.innerHTML = '';
                    resultsContainer.classList.remove('hidden');
                    
                    // 処理するURLをコピー
                    const urlsToDownload = [...urls];
                    
                    // ダウンロード開始後、URLリストを空にする
                    urls = [];
                    urlList.innerHTML = '';
                    emptyListMessage.style.display = 'block';
                    updateUrlCounter();
                    
                    // 各URLの表示要素を作成
                    for (let url of urlsToDownload) {
                        const downloadItem = createDownloadItem(url, 'downloading');
                        resultsList.appendChild(downloadItem);
                    }
                    
                    // 各URLを順番に処理
                    for (let url of urlsToDownload) {
                        try {
                            console.log('処理中:', url);
                            
                            // 'ダウンロード中'ステータスを保存
                            saveDownloadState(url, 'downloading');
                            
                            // ダウンロードを開始
                            const response = await fetch('https://gabbber-mobile.onrender.com/download', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({ url: url })
                            });
                            
                            const data = await response.json();
                            console.log('応答を受信:', data);
                            
                            if (response.ok && data.download_id) {
                                // ダウンロードステータスのチェックを開始
                                await pollDownloadStatus(url, data.download_id);
                            } else {
                                // ダウンロード開始エラー
                                saveDownloadState(url, 'error');
                                
                                const resultItem = resultsList.querySelector(`[data-url="${url}"]`);
                                if (resultItem) {
                                    resultItem.replaceWith(createDownloadItem(url, 'error'));
                                }
                            }
                        } catch (error) {
                            console.error('ネットワークエラー:', url, error);
                            
                            // エラー - 'エラー'ステータスを保存
                            saveDownloadState(url, 'error');
                            
                            const resultItem = resultsList.querySelector(`[data-url="${url}"]`);
                            if (resultItem) {
                                resultItem.replaceWith(createDownloadItem(url, 'error'));
                            }
                        }
                    }
                    
                    // ダウンロード後、インターフェースを再度有効にする
                    setInterfaceState(false);
                }

                // ダウンロードステータスを定期的にチェックする関数を追加
                async function pollDownloadStatus(url, downloadId, attempts = 0) {
                    // 最大60回試行 (2秒間隔で2分)
                    const maxAttempts = 60;
                    const interval = 2000; // 2秒間隔
                    
                    if (attempts >= maxAttempts) {
                        console.error('ダウンロード完了待ちでタイムアウト:', url);
                        saveDownloadState(url, 'error');
                        
                        const resultItem = resultsList.querySelector(`[data-url="${url}"]`);
                        if (resultItem) {
                            resultItem.replaceWith(createDownloadItem(url, 'error'));
                        }
                        return false; // ダウンロードが失敗したことを示す
                    }
                    
                    try {
                        console.log(`${url}のステータスを確認中、試行回数 ${attempts+1}/${maxAttempts}`);
                        const response = await fetch(`https://gabbber-mobile.onrender.com/download/status/${downloadId}`);
                        
                        if (!response.ok) {
                            throw new Error(`HTTPエラー: ${response.status}`);
                        }
                        
                        const statusData = await response.json();
                        console.log(`Download status for ${url}:`, statusData);
                        
                        const resultItem = resultsList.querySelector(`[data-url="${url}"]`);
                        
                        // サーバーから返されたステータスを明示的にチェック
                        // pollDownloadStatus関数内で、'completed'ステータスを処理する部分を変更
                        if (statusData.status === 'completed' && statusData.file_name) {
                            // ダウンロードが正常に完了
                            console.log(`${url}のダウンロードが完了しました`);
                            saveDownloadState(url, 'success', downloadId, statusData.file_name);
                            
                            if (resultItem) {
                                const successItem = createDownloadItem(url, 'success');
                                resultItem.replaceWith(successItem);
                                
                                // ファイルダウンロードを自動的にトリガー
                                // これにより、ファイルがPCにダウンロードされ、Chromeの履歴に追加されます
                                window.open(`https://gabbber-mobile.onrender.com/download/${downloadId}/${statusData.file_name}`, '_self');
                            }
                            return true; // ダウンロードが正常に完了したことを示す
                        } else if (statusData.status === 'error') {
                            // ダウンロードエラー
                            console.error(`${url}のダウンロードエラー:`, statusData.error);
                            saveDownloadState(url, 'error');
                            
                            if (resultItem) {
                                resultItem.replaceWith(createDownloadItem(url, 'error'));
                            }
                            return false; // ダウンロードが失敗したことを示す
                        } else {
                            // ダウンロードが進行中または不明なステータス、間隔を置いて再度確認
                            console.log(`${url}のダウンロード中、${interval/1000}秒後に再確認`);
                            await new Promise(resolve => setTimeout(resolve, interval));
                            return pollDownloadStatus(url, downloadId, attempts + 1);
                        }
                    } catch (error) {
                        console.error('ダウンロードステータスチェックエラー:', error);
                        // ネットワークエラーの場合、間隔を置いて再度試行
                        await new Promise(resolve => setTimeout(resolve, interval));
                        return pollDownloadStatus(url, downloadId, attempts + 1);
                    }
                }
                // イベントリスナー
                addUrlBtn.addEventListener('click', addUrl);
                
                urlInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        e.stopPropagation();
                        addUrl();
                    }
                });
                
                downloadAllBtn.addEventListener('click', downloadVideos);
                
                excelInput.addEventListener('change', handleExcelImport);
                
                // 初期化
                updateUrlCounter();
                
                // 保存されたダウンロードをロード
                loadSavedDownloads();
            });

            </script>

                <footer class="bg-gray-900 text-white py-12" dir="ltr"> <!-- dir="ltr" for footer -->
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
            <div class="mx-auto md:mx-0 text-center md:text-left"> <!-- text-left for this column -->
                <div class="flex items-center">
                    <span class="text-6xl sm:text-7xl md:text-8xl font-bold blue-text">fdownload</span>
                    <svg class="w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 blue-text" id="Svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="margin-left: 5px;"> <!-- Added style for 5px margin -->
                    <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8zm-1-9H7.41L12 15.59 16.59 11H13V6h-2z"/>
                    </svg>
                    </div>
                <p class="text-gray-400">Facebook動画ダウンローダー - あなたのFacebook動画を保存</p>
                <div class="flex space-x-4 mt-4 justify-center md:justify-start"> <!-- justify-start for LTR -->
                    <a href="https://www.instagram.com/grabbber.site/#/" class="text-gray-400 hover:text-white"><i class="fab fa-instagram"></i></a>
                    <a href="https://www.youtube.com/@grabbber.channel/#/" class="text-gray-400 hover:text-white"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <div class="mx-auto text-center md:text-left"> <!-- text-left for this column -->
                <h3 class="text-lg font-semibold mb-4">法務</h3>
                <ul class="space-y-2">
                    <li><a href="terms.html" class="text-gray-400 hover:text-white transition">利用規約</a></li>
                    <li><a href="mailto:contact@grabbber.site" class="text-gray-400 hover:text-white transition">robertomaliro20@gmail.com</a></li>
                </ul>
            </div>
            <div class="text-center md:text-right mt-8 md:mt-0"> <!-- text-right for this column -->
                <a href="https://pawns.app/?r=grabbber" target="_blank" class="animate-gradient-x bg-gradient-to-r from-purple-600 via-pink-500 to-yellow-500 text-white px-6 py-3 rounded-md text-lg font-semibold hover:shadow-xl transition duration-300 inline-block">お金を稼ぐ</a>
            </div>
        </div>
        <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
            <p>© 2025 FDOWNLOAD. 全著作権所有。</p>
            <p>このサイトはFacebookまたはMetaとは提携していません。</p>
        </div>
    </div>
</footer>
    </div> <!-- main-content-wrapperの終わり -->
    
    <!-- 右バナー - 追加済み -->
    <div class="ad-right-container">
        <div class="ad-right-scroll">
            <!-- Exoclice Right 1 -->
            <div class="ad-item">
                <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script>
                <ins class="eas6a97888e2" data-zoneid="5653234"></ins>
                <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
            </div>
            
            <!-- Pawn.app Right 1 -->
            <div class="ad-item">
                <a href="https://pawns.app/?r=grabbber" target="_blank">
                    <img src="https://cdn.pawns.app/images/b/160.jpg" alt="Pawns.app">
                </a>
            </div>
            
            <!-- Exoclice Right 2 -->
            <div class="ad-item">
                <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script>
                <ins class="eas6a97888e2" data-zoneid="5653238"></ins>
                <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
            </div>
            
            <!-- Pawn.app Right 2 -->
            <div class="ad-item">
                <a href="https://pawns.app/?r=grabbber" target="_blank">
                    <img src="https://cdn.pawns.app/images/b/160.jpg" alt="Pawns.app">
                </a>
            </div>
            
            <!-- Exoclice Right 3 -->
            <div class="ad-item">
                <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script>
                <ins class="eas6a97888e2" data-zoneid="5653242"></ins>
                <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
            </div>
        </div>
    </div>
    
    <!-- 画面下部のウィジェット - 追加済み -->
    <div class="sticky-bottom-ad">
        <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script>
        <ins class="eas6a97888e17" data-zoneid="5653250"></ins>
        <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
    </div>
    
    <!-- 中央回転広告バナー - 追加済み -->
    <div class="center-ad-container" id="centerAdContainer">
        <div class="center-ad-timer" id="centerAdTimer">10s</div>
        <button class="center-ad-close" id="centerAdClose">×</button>
        <div class="center-ad-content" id="centerAdContent"></div>
    </div>
    
    <!-- ページスクロールと連動するバナーのスクリプト - 追加済み -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const leftScroll = document.querySelector('.ad-left-scroll');
            const rightScroll = document.querySelector('.ad-right-scroll');
            const leftItems = document.querySelectorAll('.ad-left-scroll .ad-item');
            const rightItems = document.querySelectorAll('.ad-right-scroll .ad-item');
            
            // バナーの合計高さを計算
            const leftHeight = Array.from(leftItems).reduce((total, item) => total + item.offsetHeight + 20, 0); // 20pxはギャップ用
            const rightHeight = Array.from(rightItems).reduce((total, item) => total + item.offsetHeight + 20, 0);
            
            // 広告エリアの可視高さ
            const visibleHeight = window.innerHeight - 80; // ナビゲーションバーの80px
            
            // 最大オフセットを計算
            const maxLeftScroll = Math.max(0, leftHeight - visibleHeight);
            const maxRightScroll = Math.max(0, rightHeight - visibleHeight);
            
            // すべてのバナーが表示されるように乗数係数を追加
            const scrollFactor = 1.5; // スクロール振幅を増加
            
            window.addEventListener('scroll', function() {
                // ページスクロールの割合を計算
                const scrollPercentage = window.scrollY / (document.body.scrollHeight - window.innerHeight);
                
                // 乗数係数でバナーにスクロールを適用
                if (maxLeftScroll > 0) {
                    leftScroll.style.transform = `translateY(-${scrollPercentage * maxLeftScroll * scrollFactor}px)`;
                }
                
                if (maxRightScroll > 0) {
                    rightScroll.style.transform = `translateY(-${scrollPercentage * maxRightScroll * scrollFactor}px)`;
                }
            });
            
            // 高さ再計算のためのリサイズイベントを追加
            window.addEventListener('resize', function() {
                // 可視高さを再計算
                const newVisibleHeight = window.innerHeight - 80;
                
                // 最大オフセットを更新
                const newMaxLeftScroll = Math.max(0, leftHeight - newVisibleHeight);
                const newMaxRightScroll = Math.max(0, rightHeight - newVisibleHeight);
                
                // 新しいオフセットを適用
                const scrollPercentage = window.scrollY / (document.body.scrollHeight - window.innerHeight);
                
                if (newMaxLeftScroll > 0) {
                    leftScroll.style.transform = `translateY(-${scrollPercentage * newMaxLeftScroll * scrollFactor}px)`;
                }
                
                if (newMaxRightScroll > 0) {
                    rightScroll.style.transform = `translateY(-${scrollPercentage * newMaxRightScroll * scrollFactor}px)`;
                }
            });
        });
    </script>
    <!-- 中央回転広告バナーのスクリプト - 追加済み -->
    <script>
        window.addEventListener('load', function() {
            // DOM要素
            const centerAdContainer = document.getElementById('centerAdContainer');
            const centerAdContent = document.getElementById('centerAdContent');
            const centerAdClose = document.getElementById('centerAdClose');
            const centerAdTimer = document.getElementById('centerAdTimer');

            // 1. 新しいGrabbberプレミアムコンテンツ (最初に表示されます)
            const grabbberPremiumBanner = `
                <div class="main-container">
                    <div class="left-section">
                        <h1 class="text-3xl font-bold mb-3">No.1<br>動画ダウンローダー</h1>
                        <p class="text-base mb-6">ブラウジング中に<br>動画をダウンロード</p>
                        
                        <!-- 画像/動画の代わりに"Grabbber"テキストを表示 -->
                        <span id="grabbberTextDisplay" class="text-white text-3xl font-bold mb-4">Grabbber</span>

                        <div class="flex flex-col space-y-2 items-center"> <!-- 縦型レイアウトのためにflex-colとspace-y-2に変更 -->
                            <i class="fab fa-youtube social-icon"></i>
                            <i class="fab fa-instagram social-icon"></i>
                            <i class="fab fa-tiktok social-icon"></i>
                            <span class="text-white text-base">など多数</span>
                        </div>
                    </div>
                    <div class="right-section">
                        <h2 class="text-xl font-semibold mb-3 text-gray-800">Grabbberの完全な所有権を1回の支払いで取得。</h2>
                        
                        <!-- すべてのデバイス向けの簡潔なコンテンツ -->
                        <p class="text-sm text-gray-700 mb-4">
                            Youtube、TikTok、IG、Pornhub、Xvideosから好きなだけ動画をダウンロード。1回の支払い、定期的な費用なし、PCへのインストール方法を示すステップバイステップの動画付き。
                        </p>
                        <a href="https://grabbber.site/payment.html"><button class="get-it-for-life-button">生涯利用権を獲得</button></a>
                    </div>
                </div>
            `;

            // 2. Exoclicバナー
            const exoclicBanner = `<div id="exoclice-ad-container"></div>`;

            // 3. Pawns.appバナー
            const pawnBanner = `<div>
                <div class="text-center text-gray-700 p-2">
                                <p>
                                    ゲームをプレイしたり、接続を共有したりして、自由時間を月150〜300ドルに変えましょう。Pawns.appで簡単に受動的な収入を得ましょう。サインアップして3ドル獲得！ 
                                    <i class="fas fa-arrow-right text-purple-600 ml-1"></i>
                                    <a href="https://pawns.app/?r=grabbber" target="_blank" class="text-purple-600 font-bold hover:underline">Pawns.app</a>
                                </p>
                            </div>
                <a href="https://pawns.app/?r=grabbber" target="_blank">
                <img src="https://cdn.pawns.app/images/b/300.jpg" alt="Pawns.app">
            </a></div>`;

            // 表示順序: Grabbber Premium, Exoclic, Pawns.app
            const adContents = [
                grabbberPremiumBanner,
                exoclicBanner,
                pawnBanner
            ];

            let currentAdIndex = 0;
            let timerInterval;
            let secondsLeft = 10;
            let adInterval;

            function showAd() {
                secondsLeft = 10;
                centerAdTimer.textContent = secondsLeft + 's';

                centerAdClose.style.opacity = '0';

                centerAdContent.innerHTML = adContents[currentAdIndex];

                // Exoclicバナーの場合、Exoclicスクリプトを注入
                if (currentAdIndex === 1) {
                    const script1 = document.createElement('script');
                    script1.async = true;
                    script1.type = 'application/javascript';
                    script1.src = 'https://a.magsrv.com/ad-provider.js';
                    document.getElementById('exoclice-ad-container').appendChild(script1);

                    const ins = document.createElement('ins');
                    ins.className = 'eas6a97888e2';
                    ins.setAttribute('data-zoneid', '5653420');
                    document.getElementById('exoclice-ad-container').appendChild(ins);

                    const script2 = document.createElement('script');
                    script2.textContent = "(AdProvider = window.AdProvider || []).push({\"serve\": {}})";
                    document.getElementById('exoclice-ad-container').appendChild(script2);
                }

                centerAdContainer.style.display = 'block';
                currentAdIndex = (currentAdIndex + 1) % adContents.length;

                clearInterval(timerInterval);
                timerInterval = setInterval(function() {
                    secondsLeft--;
                    centerAdTimer.textContent = secondsLeft + 's';
                    if (secondsLeft <= 0) {
                        centerAdClose.style.opacity = '1';
                        clearInterval(timerInterval);
                        centerAdTimer.style.display = 'none';
                    }
                }, 1000);
            }

            function closeAd() {
                centerAdContainer.style.display = 'none';
                centerAdTimer.style.display = 'block';
                clearInterval(timerInterval);
            }

            centerAdClose.addEventListener('click', closeAd);

            setTimeout(function() {
                showAd();
                
                adInterval = setInterval(function() {
                    if (centerAdContainer.style.display === 'none') {
                        showAd();
                    } else {
                        closeAd();
                        showAd();
                    }
                }, 60000); // 60秒
            }, 60000); // 60秒後に最初のバナー
        });
    </script>

       <!-- START: 修正された翻訳ロジック -->
       <script>
        const langBtn = document.getElementById('langBtn');
        const langDropdown = document.getElementById('langDropdown');
    
        // メニューの開閉を処理
        langBtn.addEventListener('click', function(e) {
            e.preventDefault();
            langDropdown.classList.toggle('hidden');
        });
    
        // 外側をクリックしたらメニューを閉じる
        document.addEventListener('click', function(e) {
            if (!langBtn.contains(e.target) && !langDropdown.contains(e.target)) {
                langDropdown.classList.add('hidden');
            }
        });
    
        // 繰り返し試行で言語を変更する堅牢な関数
        function changeGoogleTranslateLanguage(lang) {
            let attempts = 0;
            const maxAttempts = 20; // 10秒間試行
            const intervalTime = 500; // 0.5秒ごと
    
            const interval = setInterval(() => {
                const select = document.querySelector('.goog-te-combo');
    
                if (select) {
                    clearInterval(interval);
                    select.value = lang;
                    select.dispatchEvent(new Event('change'));
                } else {
                    attempts++;
                    if (attempts >= maxAttempts) {
                        clearInterval(interval);
                        console.error("Google翻訳ウィジェット(.goog-te-combo)が見つかりませんでした。Googleスクリプトは広告ブロッカーによってブロックされている可能性があります。");
                    }
                }
            }, intervalTime);
        }
    
        // 言語変更を処理
        document.querySelectorAll('#langDropdown a[data-lang]').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const lang = this.getAttribute('data-lang');
                document.getElementById('currentLang').textContent = this.textContent.split(' ')[0];
                langDropdown.classList.add('hidden');
                
                changeGoogleTranslateLanguage(lang);
            });
        });

        // モバイルドロップダウン管理
        const langBtnMobile = document.getElementById('langBtnMobile');
        const langDropdownMobile = document.getElementById('langDropdownMobile');
        if (langBtnMobile && langDropdownMobile) {
            langBtnMobile.addEventListener('click', function(e) {
                e.preventDefault();
                langDropdownMobile.classList.toggle('hidden');
            });
            document.addEventListener('click', function(e) {
                if (!langBtnMobile.contains(e.target) && !langDropdownMobile.contains(e.target)) {
                    langDropdownMobile.classList.add('hidden');
                }
            });
        }
        </script>
        <!-- END: 修正された翻訳ロジック -->

</body>
</html>
